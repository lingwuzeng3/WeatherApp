// å¯¼å…¥è·¯ç”±æ¨¡å—
import { router } from '@kit.ArkUI';

// ==================== åŸŽå¸‚é€‰æ‹©é¡µé¢ ====================
@Entry
@Component
struct CitySelect {
  // ========== çŠ¶æ€å˜é‡ ==========

  // çƒ­é—¨åŸŽå¸‚åˆ—è¡¨
  @State cityList: string[] = [
    'åŒ—äº¬', 'ä¸Šæµ·', 'å¹¿å·ž', 'æ·±åœ³',
    'æ­å·ž', 'å—äº¬', 'æ­¦æ±‰', 'æˆéƒ½',
    'è¥¿å®‰', 'é‡åº†', 'å¤©æ´¥', 'è‹å·ž'
  ];

  // æœç´¢å…³é”®è¯
  @State searchText: string = '';

  // æ ¹æ®æœç´¢è¿‡æ»¤åŽçš„åŸŽå¸‚åˆ—è¡¨
  get filteredCities(): string[] {
    if (this.searchText === '') {
      return this.cityList;
    }
    return this.cityList.filter(city =>
    city.includes(this.searchText)
    );
  }

  // ========== UIæž„å»º ==========
  build() {
    Navigation() {
      Column() {
        // ===== æœç´¢æ¡† =====
        Row() {
          // æœç´¢å›¾æ ‡
          Text('ðŸ”')
            .fontSize(18)
            .margin({ right: 8 })

          // æœç´¢è¾“å…¥æ¡†
          TextInput({ placeholder: 'æœç´¢åŸŽå¸‚', text: this.searchText })
            .layoutWeight(1)
            .height(40)
            .backgroundColor('transparent')
            .onChange((value: string) => {
              this.searchText = value;
            })
        }
        .width('90%')
        .padding({ left: 16, right: 16 })
        .backgroundColor('#f5f5f5')
        .borderRadius(20)
        .margin({ top: 16, bottom: 16 })

        // ===== çƒ­é—¨åŸŽå¸‚æ ‡é¢˜ =====
        Text('çƒ­é—¨åŸŽå¸‚')
          .fontSize(16)
          .fontColor('#999999')
          .width('90%')
          .textAlign(TextAlign.Start)
          .margin({ bottom: 12 })

        // ===== åŸŽå¸‚åˆ—è¡¨ =====
        List() {
          ForEach(this.filteredCities, (city: string) => {
            ListItem() {
              Row() {
                // åŸŽå¸‚å›¾æ ‡
                Text('ðŸ“')
                  .fontSize(18)
                  .margin({ right: 12 })

                // åŸŽå¸‚åç§°
                Text(city)
                  .fontSize(18)
                  .fontColor('#333333')

                // å ä½ï¼Œè®©ç®­å¤´é å³
                Blank()

                // å³ç®­å¤´
                Text('â€º')
                  .fontSize(24)
                  .fontColor('#cccccc')
              }
              .width('100%')
              .height(56)
              .padding({ left: 16, right: 16 })
              .backgroundColor('#ffffff')
            }
            .onClick(() => {
              // ç‚¹å‡»åŸŽå¸‚ï¼Œè¿”å›žä¸»é¡µå¹¶ä¼ é€’é€‰ä¸­çš„åŸŽå¸‚
              router.back({
                url: 'pages/Index',
                params: {
                  city: city
                }
              });
            })
          })
        }
        .width('100%')
        .layoutWeight(1)
        .divider({
          strokeWidth: 1,
          color: '#f0f0f0',
          startMargin: 56,
          endMargin: 0
        })
      }
      .width('100%')
      .height('100%')
      .backgroundColor('#f0f2f5')
    }
    .title('é€‰æ‹©åŸŽå¸‚')
    .titleMode(NavigationTitleMode.Mini)
  }
}